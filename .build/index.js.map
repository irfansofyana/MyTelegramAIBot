{
  "version": 3,
  "sources": ["../index.ts"],
  "sourcesContent": ["import { Telegraf, Scenes, session } from 'telegraf';\nimport { message } from 'telegraf/filters';\nimport {\n  tldr,\n  ama,\n  writeCode,\n  explainCode,\n  brainstorm,\n  chat,\n  image\n} from './handlers';\n\nconst botToken: string | undefined = process.env.TELEGRAM_BOT_TOKEN;\nif (botToken === undefined) {\n  console.error('missing telegram bot token');\n  process.exit();\n}\n\nconst bot = new Telegraf(botToken);\n\nconst main = async (): Promise<void> => {\n  const ownerTelegramID = Number(process.env.OWNER_TELEGRAM_ID);\n\n  const stage = new Scenes.Stage([\n    tldr,\n    ama,\n    writeCode,\n    explainCode,\n    brainstorm,\n    image\n  ]);\n\n  bot.use(async (ctx, next) => {\n    if (ctx.from?.id !== ownerTelegramID) {\n      await ctx.reply(\"You're not my boss, I can't answer your question!\");\n      return;\n    }\n\n    await next();\n  });\n\n  bot.use(session());\n\n  bot.use(stage.middleware());\n\n  bot.command('tldr', (ctx) => ctx.scene.enter('tldr'));\n\n  bot.command('ama', (ctx) => ctx.scene.enter('ama'));\n\n  bot.command('code', (ctx) => ctx.scene.enter('writecode'));\n\n  bot.command('explaincode', (ctx) => ctx.scene.enter('explaincode'));\n\n  bot.command('brainstorm', (ctx) => ctx.scene.enter('brainstorm'));\n\n  bot.command('image', (ctx) => ctx.scene.enter('image'));\n\n  bot.command('whoami', async (ctx) => {\n    await ctx.reply(\n      \"I am a telegram bot that is used by @irfansppp to become his personal assistant. I'm powered by OpenAI.\"\n    );\n  });\n\n  bot.on(message('sticker'), async (ctx) => await ctx.reply('\uD83D\uDC4D'));\n\n  bot.on(message('text'), async (ctx) => {\n    await chat(ctx);\n  });\n\n  await bot.launch();\n};\n\nmain()\n  .then()\n  .catch((err) => {\n    console.error(err);\n  });\n\nprocess.once('SIGINT', () => {\n  bot.stop('SIGINT');\n});\n\nprocess.once('SIGTERM', () => {\n  bot.stop('SIGTERM');\n});\n"],
  "mappings": ";AAAA,sBAA0C;AAC1C,qBAAwB;AACxB,sBAQO;AAEP,MAAM,WAA+B,QAAQ,IAAI;AACjD,IAAI,aAAa,QAAW;AAC1B,UAAQ,MAAM,4BAA4B;AAC1C,UAAQ,KAAK;AACf;AAEA,MAAM,MAAM,IAAI,yBAAS,QAAQ;AAEjC,MAAM,OAAO,YAA2B;AACtC,QAAM,kBAAkB,OAAO,QAAQ,IAAI,iBAAiB;AAE5D,QAAM,QAAQ,IAAI,uBAAO,MAAM;AAAA,IAC7B;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,CAAC;AAED,MAAI,IAAI,OAAO,KAAK,SAAS;AAhC/B;AAiCI,UAAI,SAAI,SAAJ,mBAAU,QAAO,iBAAiB;AACpC,YAAM,IAAI,MAAM,mDAAmD;AACnE;AAAA,IACF;AAEA,UAAM,KAAK;AAAA,EACb,CAAC;AAED,MAAI,QAAI,yBAAQ,CAAC;AAEjB,MAAI,IAAI,MAAM,WAAW,CAAC;AAE1B,MAAI,QAAQ,QAAQ,CAAC,QAAQ,IAAI,MAAM,MAAM,MAAM,CAAC;AAEpD,MAAI,QAAQ,OAAO,CAAC,QAAQ,IAAI,MAAM,MAAM,KAAK,CAAC;AAElD,MAAI,QAAQ,QAAQ,CAAC,QAAQ,IAAI,MAAM,MAAM,WAAW,CAAC;AAEzD,MAAI,QAAQ,eAAe,CAAC,QAAQ,IAAI,MAAM,MAAM,aAAa,CAAC;AAElE,MAAI,QAAQ,cAAc,CAAC,QAAQ,IAAI,MAAM,MAAM,YAAY,CAAC;AAEhE,MAAI,QAAQ,SAAS,CAAC,QAAQ,IAAI,MAAM,MAAM,OAAO,CAAC;AAEtD,MAAI,QAAQ,UAAU,OAAO,QAAQ;AACnC,UAAM,IAAI;AAAA,MACR;AAAA,IACF;AAAA,EACF,CAAC;AAED,MAAI,OAAG,wBAAQ,SAAS,GAAG,OAAO,QAAQ,MAAM,IAAI,MAAM,WAAI,CAAC;AAE/D,MAAI,OAAG,wBAAQ,MAAM,GAAG,OAAO,QAAQ;AACrC,cAAM,sBAAK,GAAG;AAAA,EAChB,CAAC;AAED,QAAM,IAAI,OAAO;AACnB;AAEA,KAAK,EACF,KAAK,EACL,MAAM,CAAC,QAAQ;AACd,UAAQ,MAAM,GAAG;AACnB,CAAC;AAEH,QAAQ,KAAK,UAAU,MAAM;AAC3B,MAAI,KAAK,QAAQ;AACnB,CAAC;AAED,QAAQ,KAAK,WAAW,MAAM;AAC5B,MAAI,KAAK,SAAS;AACpB,CAAC;",
  "names": []
}
